(this.webpackJsonpgoodneighbourproject=this.webpackJsonpgoodneighbourproject||[]).push([[0],{108:function(e,t,a){},173:function(e,t,a){},178:function(e,t,a){e.exports=a.p+"static/media/signup.4203b4a3.svg"},179:function(e,t,a){e.exports=a.p+"static/media/login.f48976d4.svg"},182:function(e,t,a){e.exports=a(409)},193:function(e,t,a){},194:function(e,t,a){},196:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},402:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),o=a.n(s),c=a(6),i=a(36),l=a(175),u=a(2),m=a(3),p=a(5),h=a(4),d=a(12),f=a(11),E=a(30),g=a(1),v=a.n(g),b=a(9),y=(a(115),function(e){return E.b.success(e)}),j=function(e){return E.b.error(e)},k=function(e){return E.b.info(e)},O="FILTER_POSTS",C="GET_POSTS",N="EDIT_POST",w="DELETE_POST",S="CREATE_POST",U="GET_USER_POSTS",P=function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/posts/filter",{method:"put",body:JSON.stringify({distance:e.filterDistance,size:e.filterSize,reimbursement:e.filterPayment,currLocation:{latitude:t.latitude,longitude:t.longitude}}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=3,fetch(r);case 3:if(200!==(s=a.sent).status){a.next=9;break}return a.next=7,s.json();case 7:o=a.sent,n({type:O,payload:o});case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},x=function(e){return _(e)},_=function(e){return e.items.length<=3?"Small":e.items.length<=8?"Medium":"Large"},q=function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Request("/posts/completed",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=3,fetch(t);case 3:if(200!==(a=e.sent).status){e.next=11;break}return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:j("Unable to get completed posts");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Request("/posts/pending",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=3,fetch(t);case 3:if(200!==(a=e.sent).status){e.next=11;break}return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:j("Unable to get pending posts");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return t=e.sent,e.abrupt("return",t.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return t=e.sent,e.abrupt("return",t.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T="REGISTER",D="LOGIN",L="LOGOUT",F="UPDATE_USER",M="SET_COOKIE",V="SET_PROFILE_PIC",z="ACCEPT_POST",G="COMPLETE_POST",J=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Request("/users/"+t,{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=4,fetch(a);case 4:if(200===(n=e.sent).status){e.next=9;break}j("Internal server error - couldn't find user"),e.next=13;break;case 9:return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users",t=new Request("/users",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=4,fetch(t);case 4:if(200!==(a=e.sent).status){e.next=12;break}return e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:j("Something went wrong while getting users data");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/users/logout",fetch("/users/logout").then((function(e){t({type:L})})).catch((function(e){j("Could not log out")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Request("/users/"+t,{method:"delete",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=4,fetch(a);case 4:if(200!==(n=e.sent).status){e.next=13;break}return y("User has been deleted"),e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:j("Something went wrong deleting the user");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users",a=new Request("/users",{method:"put",body:JSON.stringify({email:t}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=4,fetch(a);case 4:if(200!==(n=e.sent).status){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:404===n.status?j("Email was not found"):400===n.status?y("User is already an admin!"):j("Internal Error");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return t=e.sent,e.abrupt("return",t.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleUserLogout=function(){e.props.logout()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("ul",{className:"navbar-links"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/"},"Home")),!this.props.currentUser&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/login"},"Login")),!this.props.currentUser&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/signup"},"Signup")),this.props.currentUser&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/feed"},"Feed")),this.props.currentUser&&r.a.createElement("li",{onClick:this.handleUserLogout},r.a.createElement(d.b,null,"Logout")))}}]),a}(r.a.Component),X=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{logout:W})(K),Z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar",id:this.props.id},r.a.createElement("h2",null,"The Good Neighbour"),r.a.createElement(X,{currentUser:this.props.currentUser}))}}]),a}(r.a.Component),$=(a(193),a(50),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"slide"},r.a.createElement("section",{className:"hero"},r.a.createElement("h1",null,"The Good Neighbour"),r.a.createElement("p",null,"\u201cBecause that\u2019s what kindness is. It\u2019s not doing something for someone else because they can\u2019t, but because you can.",r.a.createElement("span",{className:"author"}," - Andrew Iskander."),"\u201d"),r.a.createElement("div",{className:"hero-img-container"},r.a.createElement("img",{className:"hero-img"}))),r.a.createElement("section",{className:"description"},r.a.createElement("div",{className:"about"},r.a.createElement("h2",null,"Who We Are?"),r.a.createElement("p",null,"The Good Neighbour project is a community-based organization that aims at providing to the needs of the elderly population and those affected by COVID-19. Simply Sign-up to make requests for services such as buying groceries or food items and one of our community volunteers will be at your service. Want to give back to the community?")),r.a.createElement("div",{className:"description-img-container"},r.a.createElement("img",{className:"who-we-are-img"}))),r.a.createElement("section",{className:"description"},r.a.createElement("div",{className:"description-img-container"},r.a.createElement("img",{className:"what-we-do-img"})),r.a.createElement("div",{className:"about"},r.a.createElement("h2",null,"Get Involved"),r.a.createElement("p",null,"The elderly population is the worst affected by COVID-19 and are most at risk of contracting the virus. Help them come through this pandemic by signing up to be a volunteer! Select and complete the requests made by their requestors and get in touch with them directly to help them out. Reimbursement for your services will be provided."))))))}}]),a}(r.a.Component)),ee=a(7),te=a(48),ae=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).sizeEstimate=function(){return e.props.post.items.length<=3?"Small":e.props.post.items.length<=8?"Medium":"Large"},e.handlePostClick=function(){e.props.postUser._id!==e.props.currentUser._id&&e.props.highlightPost(e.props.post)},e}return Object(m.a)(a,[{key:"renderItemSizeOrList",value:function(){return this.props.postUser._id===this.props.currentUser._id||this.props.currentUser.admin?r.a.createElement("ul",{className:"request-items-list"},this.props.renderItems()):r.a.createElement("p",{className:"post-favour-size"},this.props.postUser.first_name," is asking for a ",this.sizeEstimate()," ","favour.")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"posted-request  ".concat(this.props.postUser===this.props.currentUser._id?"":"other-author"),onClick:this.handlePostClick},r.a.createElement("div",{className:"users-pic-name"},r.a.createElement("img",{className:"post-user-pic",src:this.props.postUser.profile_picture,alt:"profile-pic"}),r.a.createElement("label",{className:"post-user-title"},r.a.createElement("span",{className:"post-user-name"},this.props.postUser.first_name)," ",r.a.createElement("span",{className:"post-user-payment"},"is paying by"," ",r.a.createElement("span",{className:"payment-type"},this.props.post.reimbursement))),this.props.postUser._id===this.props.currentUser._id?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"edit-post",onClick:this.props.editClick},r.a.createElement("i",{className:"fas fa-pencil-alt"})),r.a.createElement("button",{className:"delete-post",onClick:function(){return e.props.deletePost(e.props.post._id,e.props.currentUser._id)}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"accept-request",onClick:function(){return e.props.showConfirmation(e.props.post)}},"Accept Request"),this.props.currentUser.admin?r.a.createElement("button",{className:"delete-post admin-delete-post",onClick:function(){return e.props.deletePost(e.props.post._id,e.props.currentUser._id)}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement(r.a.Fragment,null))),r.a.createElement("div",{className:"post-description"},this.renderItemSizeOrList(),r.a.createElement("p",{className:"additional-information"},r.a.createElement("label",{className:"more-info"},"Additional Information"),this.props.post.description)))}}]),a}(r.a.Component),ne=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{deletePost:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/posts",{method:"delete",body:JSON.stringify({post:e,user:t}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=3,fetch(r);case 3:if(200!==(s=a.sent).status){a.next=12;break}return a.next=7,s.json();case 7:o=a.sent,n({type:w,payload:o}),y("Request successfully deleted"),a.next=13;break;case 12:400===s.status?j("You cannot delete that request"):j("Something went wrong deleting the request");case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(ae),re=a(113),se=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={items:e.props.items},e.addItem=function(t){t.preventDefault(),""!==e._inputElement.value&&" "!==e._inputElement.value[0]&&(e.setState({items:[].concat(Object(re.a)(e.state.items),[{name:e._inputElement.value}])}),e.props.changeItems([].concat(Object(re.a)(e.state.items),[{name:e._inputElement.value}])),e._inputElement.value="")},e.deleteItem=function(t){var a=e.state.items.filter((function(e){return e.name!==t.name}));e.setState({items:a}),e.props.changeItems(a)},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){0===this.props.items.length&&0!==this.state.items.length&&this.setState({items:[]})}},{key:"renderItems",value:function(){var e=this;return this.state.items.map((function(t,a){return r.a.createElement("li",{key:a,onClick:function(){return e.deleteItem(t)},className:"request-item"},t.name," ",r.a.createElement("i",{className:"fas fa-times"}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"item-input-container"},r.a.createElement("form",{onSubmit:this.addItem},r.a.createElement("button",{id:"add-item-btn",type:"submit"},"Add Item"),r.a.createElement("input",{className:"form-new-post item-input",placeholder:"Enter an item",ref:function(t){return e._inputElement=t}}))),r.a.createElement("div",{id:"items-list-container"},r.a.createElement("ul",{className:"request-items-list"},this.renderItems())))}}]),a}(r.a.Component),oe=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={formReimbursement:e.props.post.reimbursement,formDescription:e.props.post.description,items:e.props.post.items},e.handleItemsChange=function(t){e.setState({items:t})},e.handleReimbursementChange=function(t){e.setState({formReimbursement:t.target.value})},e.handleDescriptionChange=function(t){e.setState({formDescription:t.target.value})},e.handleEditRequest=function(t){t.preventDefault();var a={reimbursement:e.state.formReimbursement,items:e.state.items,description:e.state.formDescription};e.props.editPost(e.props.post._id,a)},e}return Object(m.a)(a,[{key:"renderOtherPaymentOptions",value:function(){switch(this.props.post.reimbursement){case"Cash":return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:"E-transfer"},"E-Transfer"),r.a.createElement("option",{value:"Cheque"},"Cheque"));case"E-transfer":return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"Cheque"},"Cheque"));case"Cheque":return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"E-transfer"},"E-Transfer"));default:return r.a.createElement(r.a.Fragment,null)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"posted-request"},r.a.createElement("div",{className:"users-pic-name"},r.a.createElement("img",{className:"post-user-pic",src:this.props.postUser.profile_picture,alt:"profile-pic"}),r.a.createElement("label",{className:"post-user-title"},r.a.createElement("span",{className:"post-user-name"},this.props.postUser.first_name)," ",r.a.createElement("span",{className:"post-user-payment"},"is paying by")),r.a.createElement("select",{id:"edit-payment-select",className:"form-new-post pay-select",onChange:function(t){return e.handleReimbursementChange(t)}},r.a.createElement("option",{selected:!0,value:this.props.post.reimbursement},this.props.post.reimbursement),this.renderOtherPaymentOptions()),r.a.createElement("button",{className:"post-edit-save",onClick:this.handleEditRequest},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("button",{className:"post-edit-cancel",onClick:this.props.exitEdit},r.a.createElement("i",{className:"fas fa-times"}))),r.a.createElement("div",{id:"edit-item-list"},r.a.createElement(se,{changeItems:this.handleItemsChange,items:this.state.items})),r.a.createElement("div",{id:"edit-post-description"},r.a.createElement("label",{className:"more-info"},"Additional Information"),r.a.createElement("textarea",{value:this.state.formDescription,className:"new-post-description",placeholder:"Add more information here...",onChange:this.handleDescriptionChange,rows:"5"})))}}]),a}(r.a.Component),ce=(a(194),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={postUser:e.props.post.author,editState:!1},e.handleEditClick=function(){e.setState({editState:!0})},e.handleExitEdit=function(){e.setState({editState:!1})},e.handleEditPost=function(t,a){e.handleExitEdit(),e.props.editPost(t,a,e.props.currentUser._id)},e.renderItems=function(){return e.props.post.items.map((function(e){return r.a.createElement("li",{key:e._id,className:"request-item"},e.name)}))},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){this.state.postUser&&this.props.post.author&&this.props.post.author._id!==this.state.postUser._id&&this.setState({postUser:this.props.post.author})}},{key:"render",value:function(){return null!==this.state.postUser?this.state.editState?r.a.createElement(oe,{editPost:this.handleEditPost,exitEdit:this.handleExitEdit,post:this.props.post,postUser:this.state.postUser}):r.a.createElement(ne,{highlightPost:this.props.highlightPost,showConfirmation:this.props.showConfirmation,renderItems:this.renderItems,editClick:this.handleEditClick,post:this.props.post,postUser:this.state.postUser}):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component)),ie=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{editPost:function(e,t,a){return function(){var n=Object(b.a)(v.a.mark((function n(r){var s,o,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=new Request("/posts/".concat(e),{method:"put",body:JSON.stringify({post:t,user:a}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),n.next=3,fetch(s);case 3:if(200!==(o=n.sent).status){n.next=12;break}return n.next=7,o.json();case 7:c=n.sent,r({type:N,payload:c}),y("Request successfully edited"),n.next=13;break;case 12:400===o.status?j("You are not allowed to do that"):j("Something went wrong editing the request");case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(ce),le=a(176),ue=a.n(le),me=(a(196),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={items:[],formReimbursement:null,formDescription:null,autocompleteValue:"",location:null},e.handleItemsChange=function(t){e.setState({items:t})},e.handleReimbursementChange=function(t){e.setState({formReimbursement:t.target.value})},e.handleDescriptionChange=function(t){e.setState({formDescription:t.target.value})},e.handleAutocompleteChange=function(t){e.setState({autocompleteValue:t.target.value})},e.handleCreateRequest=function(t){if(t.preventDefault(),""!==e.state.autocompleteValue&&null!==e.state.formReimbursement&&e.state.items.length>0&&null!==e.state.location.lat&&null!==e.state.location.lng){var a={author:e.props.currentUser.id,location:e.state.location,reimbursement:e.state.formReimbursement,items:e.state.items,description:e.state.formDescription};e.setState({formDescription:null,formReimbursement:null,autocompleteValue:"",items:[],location:{lat:null,lng:null}}),e.props.createPost(a,e.props.currentUser._id)}else""===e.state.autocompleteValue?k("Please make sure your address is entered."):null===e.state.formReimbursement?k("Please make sure your payment type is chosen."):0===e.state.items.length&&k("Please enter the items you require for this request.")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-request"},r.a.createElement("div",{className:"new-request-description"},r.a.createElement("img",{src:this.props.currentUser.profile_picture,alt:"profile-pic"}),r.a.createElement("textarea",{value:this.state.formDescription?this.state.formDescription:"",className:"new-post-description",placeholder:"Provide information about your request here...",onChange:this.handleDescriptionChange,rows:"3"})),r.a.createElement("div",{className:"new-post-address"},r.a.createElement(ue.a,{onChange:this.handleAutocompleteChange,value:this.state.autocompleteValue,id:"address-input",placeholder:"Enter your delivery address here",apiKey:"AIzaSyARRBVg-xS1QeLJMfoCSeQm5At4Q-E7luU",types:["address"],onPlaceSelected:function(t){e.setState({location:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},autocompleteValue:t.formatted_address})}}),r.a.createElement("div",{className:"pay-selector"},r.a.createElement("select",{className:"form-new-post pay-select",onChange:function(t){return e.handleReimbursementChange(t)}},this.state.formReimbursement?r.a.createElement(r.a.Fragment,null):r.a.createElement("option",{selected:!0,disabled:!0,value:null},"Reimbursement"),r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"E-transfer"},"E-Transfer"),r.a.createElement("option",{value:"Cheque"},"Cheque")))),r.a.createElement("div",{className:"new-request-detail"},r.a.createElement(se,{changeItems:this.handleItemsChange,items:this.state.items})),r.a.createElement("button",{type:"button",className:"new-post-button",onClick:this.handleCreateRequest},"Create Request"))}}]),a}(r.a.Component)),pe=Object(c.b)(null,{createPost:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/posts",{method:"post",body:JSON.stringify({post:e,user:t}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=3,fetch(r);case 3:if(200!==(s=a.sent).status){a.next=12;break}return a.next=7,s.json();case 7:o=a.sent,n({type:S,payload:o}),y("Your request has been created."),a.next=13;break;case 12:j("Something went wrong creating your request.");case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(me),he=a(111),de=a.n(he);a(206);de.a.setAppElement("#root");var fe=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.props.confirmation.display?r.a.createElement(de.a,{isOpen:!!this.props.confirmation.display,onRequestClose:this.props.closeModal,style:{overlay:{backgroundColor:"rgba(0,0,0,0.3)",zIndex:1031},content:{padding:"0",border:"none",borderRadius:"5px",boxShadow:"0 0 15px rgba(0,0,0,0.5)",backgroundColor:" rgba(240,240,240,0.95)",width:"40%",minWidth:"300px",height:"50vh",margin:"auto"}}},r.a.createElement("div",{className:"confirmation-modal-header"},r.a.createElement("button",{id:"close-modal-btn",className:"post-edit-cancel",onClick:this.props.closeModal},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("span",null,"Are you sure you want to accept this request?")),r.a.createElement("div",{className:"confirmation-info"},r.a.createElement("div",{className:"confirmation-author"},r.a.createElement("label",null,"Request made by"),r.a.createElement("img",{src:this.props.confirmation.selectedPost.author.profile_picture,alt:"requester-profile"}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("p",null,this.props.confirmation.selectedPost.author.first_name))),r.a.createElement("div",{className:"confirmation-size"},r.a.createElement("label",null,"Size of Request"),r.a.createElement("p",null,x(this.props.confirmation.selectedPost)))),r.a.createElement("div",{className:"confirmation-actions"},r.a.createElement("button",{className:"cancel-action",onClick:this.props.closeModal},"Cancel"),r.a.createElement("button",{className:"accept-action",onClick:function(){return e.props.acceptPost(e.props.confirmation.selectedPost)}},"Confirm"))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),Ee=a(412),ge=(a(207),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={filterDistance:null,filterSize:null,filterPayment:null},e.handleUserLogout=function(){e.props.logout()},e.handleFilterClick=function(){var t=Object(ee.a)({},e.state);e.props.filterPosts(t,e.props.currentUserLocation)},e}return Object(m.a)(a,[{key:"handleDistanceChange",value:function(e){"Any Distance"===e.target.value||this.setState({filterDistance:e.target.value})}},{key:"handleSizeChange",value:function(e){this.setState({filterSize:e.target.value})}},{key:"handlePaymentChange",value:function(e){this.setState({filterPayment:e.target.value})}},{key:"renderProfile",value:function(){var e=this.props.currentUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-header"},r.a.createElement("img",{src:e.profile_picture,alt:"profile"}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("p",null,e.first_name," ",e.last_name))),r.a.createElement("div",{id:"sidebar-tabs"},r.a.createElement(d.b,{to:"/"},"Home"),r.a.createElement(d.b,{to:"/settings"},"Settings"),r.a.createElement("button",{onClick:this.handleUserLogout},"Log out")))}},{key:"renderFilter",value:function(){var e=this;return r.a.createElement("div",{className:"filter-section"},r.a.createElement("div",{className:"dropdown-filters"},r.a.createElement("select",{defaultValue:"any",onChange:function(t){return e.handleDistanceChange(t)}},r.a.createElement("option",{value:"any"},"Any Distance"),r.a.createElement("option",{value:"1"},"< 1km"),r.a.createElement("option",{value:"5"},"< 5km"),r.a.createElement("option",{value:"20"},"< 20km"),r.a.createElement("option",{value:"21"},"20+km")),r.a.createElement("select",{defaultValue:"any",onChange:function(t){return e.handleSizeChange(t)}},r.a.createElement("option",{value:"any"},"Any Size"),r.a.createElement("option",{value:"small"},"Small"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"large"},"Large")),r.a.createElement("select",{defaultValue:"any",onChange:function(t){return e.handlePaymentChange(t)}},r.a.createElement("option",{value:"any"},"Any Payment"),r.a.createElement("option",{value:"cash"},"Cash"),r.a.createElement("option",{value:"e-transfer"},"E-transfer"),r.a.createElement("option",{value:"cheque"},"Cheque"))),r.a.createElement("button",{type:"button",className:"filter-button",onClick:this.handleFilterClick},"Filter Requests"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},this.renderProfile(),this.renderFilter())}}]),a}(r.a.Component)),ve=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{logout:W,filterPosts:P})(ge),be=a(28),ye=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={directions:null,previousLocation:null,mapSelectedPost:null,activeRequest:e.props.active_post?e.props.posts[0]:null},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.state.activeRequest&&this.props.currentUserLocation&&this.setDirections()}},{key:"componentDidUpdate",value:function(e){this.state.activeRequest&&this.props.currentUserLocation&&null===e.currentUserLocation&&this.setDirections()}},{key:"setDirections",value:function(){var e=this,t=new window.google.maps.DirectionsService,a={lat:this.props.currentUserLocation.latitude,lng:this.props.currentUserLocation.longitude},n=this.state.activeRequest.location;t.route({origin:a,destination:n,travelMode:window.google.maps.TravelMode.DRIVING},(function(t,a){a===window.google.maps.DirectionsStatus.OK?e.setState({directions:t}):console.error("error fetching directions ".concat(t))}))}},{key:"setSelectedRequest",value:function(e){var t=this.props.highlightedPost?this.props.highlightedPost:this.state.mapSelectedPost;this.props.resetFeedSelectedPost(null),this.setState({previousLocation:t?t.location:null,mapSelectedPost:e})}},{key:"setDefaultCenter",value:function(){return this.state.activeRequest?this.state.activeRequest.location:this.props.highlightedPost?this.props.highlightedPost.location:this.state.mapSelectedPost?this.state.mapSelectedPost.location:this.state.previousLocation?this.state.previousLocation:this.props.currentUserLocation?{lat:this.props.currentUserLocation.latitude,lng:this.props.currentUserLocation.longitude}:{lat:43.65107,lng:-79.347015}}},{key:"renderLocations",value:function(){var e=this;return this.state.activeRequest?this.props.posts.map((function(t){return r.a.createElement(be.Marker,{key:t.id,position:e.state.activeRequest.location},r.a.createElement(be.InfoWindow,null,r.a.createElement("div",{className:"marker-description"},e.state.activeRequest.description)))})):this.props.posts.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.Circle,{key:t._id,radius:2e3,center:{lat:t.location.lat,lng:t.location.lng},onClick:function(){e.setSelectedRequest(t)},strokeColor:"transparent",strokeOpacity:.5,strokeWeight:1,fillColor:"#FFFFFF",fillOpacity:.2}),e.state.mapSelectedPost&&t.location.lat===e.state.mapSelectedPost.location.lat&&t.location.lng===e.state.mapSelectedPost.location.lng?r.a.createElement(be.InfoWindow,{position:e.state.mapSelectedPost.location,onCloseClick:function(){return e.setSelectedRequest(null)}},r.a.createElement("div",{className:"marker-container"},r.a.createElement("div",{className:"marker-author-info"},r.a.createElement("img",{className:"marker-author-pic",src:e.state.mapSelectedPost.author.profile_picture,alt:"author"}),r.a.createElement("span",{className:"marker-author-name"},e.state.mapSelectedPost.author.first_name,"'s Request")),r.a.createElement("div",{className:"marker-size"},x(e.state.mapSelectedPost)),r.a.createElement("div",{className:"marker-description"},e.state.mapSelectedPost.description))):null,e.props.highlightedPost&&t.location.lat===e.props.highlightedPost.location.lat&&t.location.lng===e.props.highlightedPost.location.lng?r.a.createElement(be.InfoWindow,{position:e.props.highlightedPost.location,onCloseClick:function(){return e.setSelectedRequest(null)}},r.a.createElement("div",{className:"marker-container"},r.a.createElement("div",{className:"marker-author-info"},r.a.createElement("img",{className:"marker-author-pic",src:e.props.highlightedPost.author.profile_picture,alt:"author"}),r.a.createElement("span",{className:"marker-author-name"},e.props.highlightedPost.author.first_name,"'s Request")),r.a.createElement("div",{className:"marker-size"},x(e.props.highlightedPost)),r.a.createElement("div",{className:"marker-description"},e.props.highlightedPost.description))):null)}))}},{key:"render",value:function(){var e=Object(Ee.a)();return this.state.activeRequest&&this.state.directions?r.a.createElement(be.GoogleMap,{key:e,defaultCenter:this.setDefaultCenter(),defaultZoom:10},r.a.createElement(be.DirectionsRenderer,{directions:this.state.directions})):r.a.createElement(be.GoogleMap,{key:e,defaultZoom:10,defaultCenter:this.setDefaultCenter()},this.renderLocations())}}]),a}(r.a.Component),je=Object(be.withScriptjs)(Object(be.withGoogleMap)(ye)),ke=(a(402),"AIzaSyARRBVg-xS1QeLJMfoCSeQm5At4Q-E7luU"),Oe=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={postAuthor:e.props.currentUser.active_post.author},e.completeRequest=function(){e.props.completePost(e.props.currentUser.active_post._id,e.props.currentUser._id)},e.renderItems=function(){return e.props.currentUser.active_post.items.map((function(e){return r.a.createElement("li",{key:Object(Ee.a)(),className:"request-item"},e.name)}))},e}return Object(m.a)(a,[{key:"render",value:function(){return null!==this.props.currentUser.active_post?r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,{currentUserLocation:this.props.currentUserLocation}),r.a.createElement("div",{className:"timeline"},r.a.createElement("div",{className:"active-request-container"},r.a.createElement("div",{className:"active-request-header"},r.a.createElement("h5",null,"You have an active request...")),r.a.createElement("div",{className:"active-request-author"},r.a.createElement("h4",null,this.state.postAuthor.first_name,"'s Request")),r.a.createElement("div",{className:"map-route"},r.a.createElement(je,{currentUserLocation:this.props.currentUserLocation,active_post:!0,posts:[this.props.currentUser.active_post],googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=".concat(ke),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})),r.a.createElement("div",{className:"active-items-requested"},r.a.createElement("label",null,"Items Requested"),r.a.createElement("ul",{className:"request-items-list"},this.renderItems())),r.a.createElement("div",{className:"active-description"},r.a.createElement("label",null,"Description Provided"),r.a.createElement("p",null,this.props.currentUser.active_post.description)),r.a.createElement("div",{className:"end-active-request"},r.a.createElement("button",{id:"complete-request",onClick:this.completeRequest},"Request Completed"))))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),Ce=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{completePost:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/posts/complete/".concat(e),{method:"put",body:JSON.stringify({user:t}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=3,fetch(r);case 3:if(200!==(s=a.sent).status){a.next=13;break}return a.next=7,s.json();case 7:o=a.sent,n({type:G,payload:o}),n({type:C,payload:o.posts}),y("Request completed."),a.next=14;break;case 13:j("Something went wrong completing this request");case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Oe),Ne=(a(403),"AIzaSyARRBVg-xS1QeLJMfoCSeQm5At4Q-E7luU"),we=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getUserLocation=function(e){n.setState({currentUserLocation:e.coords})},n.handleHighlightedPostChange=function(e){n.setState({highlightedPost:e})},n.handleConfirmationModal=function(e){n.setState({confirmationModal:{display:!0,selectedPost:e}})},n.handleCloseModal=function(){n.setState({confirmationModal:{display:!1,selectedPost:null}})},n.handleAcceptPost=function(e){n.handleCloseModal(),n.props.acceptPost(e._id,n.props.currentUser._id)},n.toggleMap=function(){n.setState({showMap:!n.state.showMap})},n.state={showMap:!0,currentUserLocation:null,highlightedPost:null,confirmationModal:{display:!1,selectedPost:null},currentPage:1,postsPerPage:5},n.handlePageClick=n.handlePageClick.bind(Object(te.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.getUserLocation):j("Geolocation is not supported on this browser")}},{key:"filterPosts",value:function(){return P(this.props.posts,this.props.posts)}},{key:"handlePageClick",value:function(e){this.setState({currentPage:this.state.currentPage+e})}},{key:"renderPagination",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,1===this.state.currentPage?r.a.createElement("div",{className:"navigate-page disabled"},r.a.createElement("i",{className:"fas fa-angle-double-left"}),"Previous Page"):r.a.createElement("div",{className:"navigate-page",onClick:function(){return e.handlePageClick(-1)}},r.a.createElement("i",{className:"fas fa-angle-double-left"}),"Previos Page"),r.a.createElement("div",{className:"current-page"},"Page ",this.state.currentPage),this.state.currentPage*this.state.postsPerPage>=this.props.posts.length?r.a.createElement("div",{className:"navigate-page disabled"},"Next Page",r.a.createElement("i",{className:"fas fa-angle-double-right"})):r.a.createElement("div",{className:"navigate-page",onClick:function(){return e.handlePageClick(1)}},"Next Page",r.a.createElement("i",{className:"fas fa-angle-double-right"})))}},{key:"renderEmptyMessage",value:function(){return r.a.createElement("div",{className:"empty-message"},"No requests exist or match your filter.")}},{key:"renderGoogleMap",value:function(e){return r.a.createElement("div",{className:"google-maps-container"},r.a.createElement("div",{className:"google-maps-section ".concat(this.state.showMap?"":"hide")},r.a.createElement(je,{currentUserLocation:this.state.currentUserLocation,resetFeedSelectedPost:this.handleHighlightedPostChange,highlightedPost:this.state.highlightedPost,active_post:!1,posts:e,googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=".concat(Ne),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})),r.a.createElement("div",null,r.a.createElement("button",{className:"toggle-map",onClick:this.toggleMap},this.state.showMap?"Hide Map":"Show Map")))}},{key:"render",value:function(){var e=this;if(null!==this.props.currentUser.active_post)return r.a.createElement(Ce,{currentUserLocation:this.state.currentUserLocation});if(null!=this.props.posts){var t=this.props.posts,a=this.state,n=a.currentPage,s=a.postsPerPage,o=n*s,c=o-s,i=t.slice(c,o);1!==n&&0===i.length&&(c=(o=(n=1)*s)-s,i=t.slice(c,o));var l=i.map((function(t,a){return r.a.createElement(ie,{highlightPost:e.handleHighlightedPostChange,showConfirmation:e.handleConfirmationModal,key:a,post:t})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,{currentUserLocation:this.state.currentUserLocation}),r.a.createElement("div",{className:"timeline"},this.renderGoogleMap(i),r.a.createElement(pe,{currentUser:this.props.currentUser}),0===i.length?this.renderEmptyMessage():r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"posts"},l),r.a.createElement("div",{id:"pagination"},this.renderPagination()))),r.a.createElement(fe,{acceptPost:this.handleAcceptPost,confirmation:this.state.confirmationModal,closeModal:this.handleCloseModal}))}return r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),Se=Object(c.b)((function(e){return{currentUser:e.auth.currentUser,posts:e.posts.posts}}),{acceptPost:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/posts/accept/".concat(e),{method:"put",body:JSON.stringify({user:t}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=3,fetch(r);case 3:if(200!==(s=a.sent).status){a.next=12;break}return a.next=7,s.json();case 7:o=a.sent,n({type:z,payload:o}),y("Request accepted"),a.next=13;break;case 12:j("Something went wrong accepting this request");case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(we),Ue=(a(404),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={filterDistance:null,filterSize:null,filterPayment:null,setState:e.setState.bind(Object(te.a)(e))},e.handleFilterChange=function(t){e.setState(Object(ee.a)({},t))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){return null===this.props.currentUser?r.a.createElement(f.a,{to:"/login"}):r.a.createElement("div",{className:"feedContainer slide"},r.a.createElement(Se,{changeFilterState:this.handleFilterChange}))}}]),a}(r.a.Component)),Pe=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{getPosts:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Request("/posts",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),e.next=3,fetch(a);case 3:if(200!==(n=e.sent).status){e.next=11;break}return e.next=7,n.json();case 7:r=e.sent,t({type:C,payload:r}),e.next=12;break;case 11:j("Something went wrong, couldn't load posts");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ue),xe=a(35),_e=(a(173),a(178)),qe=a.n(_e),Re={first_name:"",last_name:"",email:"",password:"",password_confirmation:""},Ae=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Re,e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(xe.a)({},r,n))},e.formSubmit=function(t){t.preventDefault(),e.props.register(e.state)},e}return Object(m.a)(a,[{key:"render",value:function(){return this.props.currentUser?r.a.createElement(f.a,{to:"/feed"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement("div",{className:"contentContainer slide"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Signup"),r.a.createElement("img",{src:qe.a,alt:"signup"}),r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"first_name",type:"text",placeholder:"First Name",onChange:this.handleChange}),r.a.createElement("p",{className:"error_msg"},this.state.first_name_error)),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"last_name",type:"text",placeholder:"Last Name",onChange:this.handleChange}),r.a.createElement("p",{className:"error_msg"},this.state.last_name_error)),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange}),r.a.createElement("p",{className:"error_msg"},this.state.email_error)),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("p",{className:"error_msg"},this.state.password_error)),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"password_confirmation",type:"password",placeholder:"Confirm Password",onChange:this.handleChange}),r.a.createElement("p",{className:"error_msg"},this.state.password_confirmation_error)),r.a.createElement("div",{className:"form-input"},r.a.createElement("button",{className:"form-submit",type:"buton",onSubmit:this.formSubmit},"Submit"))))))}}]),a}(r.a.Component),Ie=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{register:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Request("/users",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),t.next=3,fetch(n);case 3:if(400!==(r=t.sent).status){t.next=8;break}j("Something went wrong"),t.next=29;break;case 8:if(500!==r.status&&404!==r.status){t.next=12;break}j("Something went wrong"),t.next=29;break;case 12:if(417!==r.status){t.next=16;break}j("Passwords do not match"),t.next=29;break;case 16:if(418!==r.status){t.next=20;break}j("Last name is required"),t.next=29;break;case 20:if(419!==r.status){t.next=24;break}j("First name is required"),t.next=29;break;case 24:if(200!==r.status){t.next=29;break}return t.next=27,r.json();case 27:s=t.sent,a({type:D,payload:s});case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Ae),Te=a(179),De=a.n(Te),Le={email:"",password:""},Fe=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Le,e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(xe.a)({},r,n))},e.formSubmit=function(t){t.preventDefault(),e.props.login(e.state)},e}return Object(m.a)(a,[{key:"render",value:function(){return this.props.currentUser?r.a.createElement(f.a,{to:"/feed"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement("div",{className:"contentContainer slide"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h3",null,"Login"),r.a.createElement("img",{src:De.a,alt:"login"}),r.a.createElement("form",{onSubmit:this.formSubmit},r.a.createElement("p",{className:"error_msg"},this.state.error_msg),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange})),r.a.createElement("div",{className:"form-input"},r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-input"},r.a.createElement("button",{className:"form-submit",type:"buton",onSubmit:this.formSubmit},"Submit"))))))}}]),a}(r.a.Component),Me=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{login:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Request("/users/login",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),t.next=3,fetch(n);case 3:if(400!==(r=t.sent).status){t.next=8;break}j("Invalid login credentials"),t.next=17;break;case 8:if(500!==r.status&&404!==r.status){t.next=12;break}j("Something went wrong"),t.next=17;break;case 12:if(200!==r.status){t.next=17;break}return t.next=15,r.json();case 15:s=t.sent,a({type:D,payload:s});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Fe),Ve=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(f.a,{to:"/login"})}}]),a}(r.a.Component),ze=(a(405),a(406),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("div",{className:"user-curr-info"},r.a.createElement(d.b,{to:"/feed"},r.a.createElement("button",{className:"back-button"},r.a.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true"}))),r.a.createElement("div",{className:"profile-img"},r.a.createElement("img",{src:e.profile_picture,alt:"profile"})),r.a.createElement("h3",null,e.first_name," ",e.last_name," "),r.a.createElement("h4",null,e.email))}}]),a}(r.a.Component)),Ge=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{getUserById:J})(ze),Je=(a(407),a(408),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).uploadProfilePic=function(t){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onloadend=function(){var t=e.props.currentUser._id;e.props.addImage(t,a.result)}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("label",null,"Profile picture:"),r.a.createElement("input",{name:"profile_picture",type:"file",onChange:function(t){return e.uploadProfilePic(t)}}))}}]),a}(r.a.Component)),Be=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{addImage:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/users/image/"+e,{method:"post",body:JSON.stringify({data:t}),headers:{"Content-Type":"application/json"}}),a.next=4,fetch(r);case 4:if(200!==(s=a.sent).status){a.next=13;break}return a.next=8,s.json();case 8:o=a.sent,n({type:"SET_PROFILE_PIC",payload:o}),y("Profile picture updated"),a.next=14;break;case 13:j("Could not update profile picture");case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Je),We=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).formSubmit=function(e){e.preventDefault(),n.props.updateUser(n.props.currentUser._id,n.state)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(xe.a)({},a,r))},n.state={first_name:"",last_name:"",email:"",password:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("div",{className:"user-update-info ".concat(this.props.adminClass)},this.props.adminClass?r.a.createElement(r.a.Fragment,null):r.a.createElement("h3",null,"Update Information"),r.a.createElement("form",{className:"update-form",onSubmit:this.formSubmit},r.a.createElement("div",{className:"update-input-container"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{name:"first_name",type:"text",placeholder:e.first_name,onChange:this.handleChange})),r.a.createElement("div",{className:"update-input-container"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{name:"last_name",type:"text",placeholder:e.last_name,onChange:this.handleChange})),r.a.createElement("div",{className:"update-input-container"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",type:"email",placeholder:e.email,onChange:this.handleChange})),r.a.createElement("div",{className:"update-input-container"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("div",{className:"update-input-container"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"update-input-container"},r.a.createElement("button",{className:"update-submit",type:"buton",onSubmit:this.formSubmit},"Update info"))))}}]),a}(r.a.Component),Qe=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{getUserById:J,updateUser:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Request("/users/"+e,{method:"PATCH",body:JSON.stringify(t),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),a.next=4,fetch(r);case 4:if(400!==(s=a.sent).status){a.next=9;break}j("Profile not updated due to invalid information"),a.next=19;break;case 9:if(500!==s.status&&404!==s.status){a.next=13;break}j("Something went wrong"),a.next=19;break;case 13:if(200!==s.status){a.next=19;break}return a.next=16,s.json();case 16:o=a.sent,n({type:F,payload:o}),y("Profile succesfully updated");case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(We),He=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currentUser;return null===e?r.a.createElement(f.a,{to:"/login"}):!0===e.admin?r.a.createElement(f.a,{to:"/admin"}):r.a.createElement("div",{className:"settings-container settings"},r.a.createElement(Ge,null),r.a.createElement("div",{className:"user-update-container"},r.a.createElement(Qe,null)))}}]),a}(r.a.Component),Ye=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{getUserById:J})(He),Ke=a(180),Xe=(a(108),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userToPromote:""},e.handleInputChange=function(t){e.setState({userToPromote:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.promoteUser(e.state.userToPromote),e.setState({userToPromote:""})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"make-user-admin"},r.a.createElement("form",{className:"make-admin-form"},r.a.createElement("label",{className:"make-admin-label"},"Make A User An Admin"),r.a.createElement("input",{type:"text",name:"name",value:this.state.userToPromote,placeholder:"Email of user to promote",onChange:function(t){return e.handleInputChange(t)}}),r.a.createElement("button",{className:"promoteButton",type:"submit",onClick:function(t){return e.handleSubmit(t)}},"Promote")))}}]),a}(r.a.Component)),Ze=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:[]},e.deleteUserAndPosts=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.admin){t.next=4;break}j("Cannot delete admin"),t.next=8;break;case 4:return t.next=6,Q(a._id);case 6:(n=t.sent)&&e.setState({users:n});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.promoteUser=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(a);case 2:(n=t.sent)&&e.setState({users:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;B().then((function(t){e.setState({users:t})}))}},{key:"renderUsers",value:function(){var e=this;return this.state.users.map((function(t){return r.a.createElement("tr",{className:"user-row",key:t._id},r.a.createElement("td",null,t.admin?"Yes":"No"),r.a.createElement("td",null,t.first_name," ",t.last_name),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.rating),r.a.createElement("td",null,r.a.createElement("button",{className:"remove-user"},r.a.createElement("i",{className:"fas fa-trash",onClick:function(){return e.deleteUserAndPosts(t)}}))))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe,{promoteUser:this.promoteUser}),r.a.createElement("table",{className:"user-list-table"},r.a.createElement("thead",null,r.a.createElement("tr",{id:"users-list-header"},r.a.createElement("th",{className:"promote-col",scole:"col"},"Admin"),r.a.createElement("th",{className:"name-col",scope:"col"},"Name"),r.a.createElement("th",{className:"email-col",scope:"col"},"Email"),r.a.createElement("th",{className:"rating-col",scope:"col"},"Rating"),r.a.createElement("th",{className:"remove-col",scope:"col"},"Delete User"))),r.a.createElement("tbody",null,this.renderUsers())))}}]),a}(r.a.Component),$e=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={num_users:0,num_requests_completed:0,num_requests_pending:0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getAllUserCount(),this.getPostInfo()}},{key:"getAllUserCount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:t=e.sent,this.setState({num_users:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPostInfo",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,e.next=5,I();case 5:a=e.sent,this.setState({num_requests_completed:t,num_requests_pending:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"statsContainer"},r.a.createElement("ul",{className:"flexStats"},r.a.createElement("li",{className:"displayStats"},"NUMBER OF ACTIVE USERS ",r.a.createElement("p",null,this.state.num_users)),r.a.createElement("li",{className:"displayStats"},"NUMBER OF REQUESTS COMPLETED",r.a.createElement("p",null,this.state.num_requests_completed)),r.a.createElement("li",{className:"displayStats"},"NUMBER OF REQUESTS PENDING COMPLETION",r.a.createElement("p",null,this.state.num_requests_pending))))}}]),a}(r.a.Component),et=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),{getUserById:J})((function(e){var t={VIEW_USERS:"View Users",APP_STATS:"App Stats",UPDATE_INFO:"Update Info"},a=Object(n.useState)(t.VIEW_USERS),s=Object(Ke.a)(a,2),o=s[0],c=s[1],i=null;switch(o){case t.CREATE_ADMIN:i=Xe;break;case t.VIEW_USERS:i=Ze;break;case t.APP_STATS:i=$e;break;case t.UPDATE_INFO:i=Qe}var l=e.currentUser;return null===l?r.a.createElement(f.a,{to:"/login"}):l.admin?r.a.createElement("div",{className:"settings-container slide"},r.a.createElement(Ge,null),r.a.createElement("div",{className:"admin-dashboard"},r.a.createElement("div",{className:"admin-dashboard-header"},r.a.createElement("h3",null,"Admin Dashboard")),r.a.createElement("div",{className:"tab-container"},r.a.createElement("button",{className:"admin-tab ".concat(o===t.VIEW_USERS?"active":""),onClick:function(){return c(t.VIEW_USERS)}},"View Users"),r.a.createElement("button",{className:"admin-tab  ".concat(o===t.APP_STATS?"active":""),onClick:function(){return c(t.APP_STATS)}},"App Stats"),r.a.createElement("button",{className:"admin-tab ".concat(o===t.UPDATE_INFO?"active":""),onClick:function(){return c(t.UPDATE_INFO)}},"Personal Settings")),r.a.createElement("div",{className:"content"},o&&r.a.createElement(i,null)))):r.a.createElement(f.a,{to:"/settings"})})),tt=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).props.readCookie(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0,component:function(){return r.a.createElement($,null)}}),r.a.createElement(f.b,{path:"/feed",component:function(){return r.a.createElement(Pe,null)}}),r.a.createElement(f.b,{exact:!0,path:"/signup",component:function(){return r.a.createElement(Ie,null)}}),r.a.createElement(f.b,{exact:!0,path:"/login",component:function(){return r.a.createElement(Me,null)}}),r.a.createElement(f.b,{exact:!0,path:"/settings",component:function(){return r.a.createElement(Ye,null)}}),r.a.createElement(f.b,{exact:!0,path:"/admin",component:function(){return r.a.createElement(et,null)}}),r.a.createElement(f.b,{exact:!0,path:"/logout",component:function(){return r.a.createElement(Ve,{users_state:e.state})}}))),r.a.createElement(E.a,null))}}]),a}(r.a.Component),at=Object(c.b)(null,{readCookie:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users/check-session",e.next=3,fetch("/users/check-session");case 3:if(200!==(a=e.sent).status){e.next=9;break}return e.next=7,a.json();case 7:n=e.sent,t({type:M,payload:n});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(tt),nt={currentUser:null},rt={posts:null},st=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:case D:return Object(ee.a)(Object(ee.a)({},e),{},{currentUser:t.payload.currentUser});case L:return Object(ee.a)(Object(ee.a)({},e),{},{currentUser:null});case F:case M:case V:case z:case G:return Object(ee.a)(Object(ee.a)({},e),{},{currentUser:t.payload.currentUser});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case S:case w:case N:case O:case U:return Object(ee.a)(Object(ee.a)({},e),{},{posts:t.payload});default:return e}}}),ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ct=Object(i.e)(st,ot(Object(i.a)(l.a)));o.a.render(r.a.createElement(c.a,{store:ct},r.a.createElement(at,null)),document.getElementById("root"))},50:function(e,t,a){}},[[182,1,2]]]);
//# sourceMappingURL=main.c5e7feaf.chunk.js.map